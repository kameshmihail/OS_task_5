Московский Авиационный Институт
(Национальный Исследовательский Университет)

Факультет информационных технологий и прикладной математики
Кафедра вычислительной математики и программирования


Лабораторная работа №5 по курсу
«Операционные системы»
	

Содержание
1.	Постановка задания
2.	Вариант задания
3.	Общие сведения о программе
4.	Общий метод и алгоритм решения
5.	Демонстрация работы программы
6. 	Выводы

Цель работы
Целью является приобретение практических навыков в:
•	Создание динамических библиотек
•	Создание программ, которые используют функции динамических библиотек
Задание
Требуется создать динамическую библиотеку, которая реализует определенный функционал. Далее использовать данную библиотеку 2-мя способами:
1.	Во время компиляции (на этапе «линковки»/linking)
2.	Во время исполнения программы, подгрузив библиотеку в память с помощью системных вызовов
В конечном итоге, программа должна состоять из следующих частей:
•	Динамическая библиотека, реализующая заданных вариантом интерфейс;
•	Тестовая программа, которая используют библиотеку, используя знания полученные на этапе компиляции;
•	Тестовая программа, которая использует библиотеку, используя только местоположение динамической библиотеки и ее интерфейс.
Провести анализ между обоими типами использования библиотеки.


Вариант задания.
	Работа с деком

Общие сведения о программе
Программа компилируется из нескольких файлов с помощью Makefile. В программе используются следующие системные вызовы:
1. dlclose - уменьшает количество открытых ссылок на библиотеку.
2. dlopen - открывает библиотеку и увеличивает количество открытых ссылок библиотеки.
3. dlsym - ищет в библиотеке символ (например, функцию) и возвращает его адрес.
4. dlerror - возвращает указатель на строку сообщения после возврата ошибки из dlopen (), dlsym () или dlclose ().

Общий метод и алгоритм решения.
Для реализации поставленной задачи необходимо:
1.	Создание deque.h/deque.c файлов, описывающих функционал дека
2.	Создание stat.c - программа, которая используют библиотеку, используя знания полученные на этапе компиляции
3.	Создание dynam.c - программа, которая используют библиотеку, используя знания полученные на этапе компиляции 
4.	Подключение динамической библиотеки и сбор программы с помощью Makefile

Демонстрация работы программы.

0. Exit
1. Push back
2. Push front
3. Check back
4. Check front
5. Pop back
6. Pop front
7. Check empty
8. Pop all and show

1 5
(5)
2 7
(7 5)
3
(5)
4
(7)
5
(7)
7
Not empty.
8
(7)

Выводы:
В процессе выполнения работы были изучены принципы построения динамических библиотек и создания программ, которые используют функции динамических библиотек. Для
демонстрации работы была также создана статическая библиотека без использования функций динамических библиотек. Четыре функции dlopen (), dlsym (), dlclose (),
dlerror () реализуют интерфейс для загрузчика динамической линковки. Были некоторые проблемы при считывании строк с клавиатуры и неправильно их интерпретирование,
но это не связано с основным функционалом программы и частично устраняется getchar коммандами.
